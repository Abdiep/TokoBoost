# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure
# This file is used to configure the build and run settings for your App Hosting backend.
# It is required for all App Hosting backends.

# Specifies the build configuration for your backend.
requiredBuildStep:
  # Tells App Hosting to use the Node.js buildpack.
  # This buildpack will automatically detect and build your Next.js app.
  id: node

# Settings for the running server.
runConfig:
  # Jumlah maksimal instance untuk auto scaling.
  maxInstances: 1

  # Environment variables diambil dari Firebase Secrets.
  # Gunakan ini agar bisa diakses via process.env di server (Next.js Route Handlers).
  env:
    - key: SERVICE_ACCOUNT_KEY
      secret: SERVICE_ACCOUNT_KEY
    - key: DATABASE_URL
      secret: DATABASE_URL
    - key: GEMINI_API_KEY
      secret: GEMINI_API_KEY
    - key: MIDTRANS_SERVER_KEY
      secret: MIDTRANS_SERVER_KEY
    - key: NEXT_PUBLIC_MIDTRANS_CLIENT_KEY
      secret: NEXT_PUBLIC_MIDTRANS_CLIENT_KEY
