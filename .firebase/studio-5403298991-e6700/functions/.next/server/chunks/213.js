"use strict";exports.id=213,exports.ids=[213],exports.modules={24414:(e,a,s)=>{s.d(a,{A:()=>F});var t=s(60687),r=s(43210),n=s(85814),l=s.n(n),o=s(57736),i=s(9812),d=s(49497),c=s(29523),m=s(35079),f=s(10991),p=s(78726),x=s(4780);let u=f.bL;f.l9;let h=f.ZL;f.bm;let g=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(f.hJ,{ref:s,className:(0,x.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));g.displayName=f.hJ.displayName;let N=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(h,{children:[(0,t.jsx)(g,{}),(0,t.jsxs)(f.UC,{ref:r,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[a,(0,t.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));N.displayName=f.UC.displayName;let y=({className:e,...a})=>(0,t.jsx)("div",{className:(0,x.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});y.displayName="DialogHeader";let j=({className:e,...a})=>(0,t.jsx)("div",{className:(0,x.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});j.displayName="DialogFooter";let b=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(f.hE,{ref:s,className:(0,x.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));b.displayName=f.hE.displayName;let v=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(f.VY,{ref:s,className:(0,x.cn)("text-sm text-muted-foreground",e),...a}));v.displayName=f.VY.displayName;var w=s(44493),k=s(58450),R=s(11516),C=s(29867);let z=[{name:"UMKM",credits:25,price:29e3,features:["25 Kredit"],tag:null},{name:"Toko",credits:160,price:119e3,popular:!0,features:["150 Kredit + 10 Bonus"],tag:"Best Value"},{name:"Mall",credits:530,price:349e3,features:["500 Kredit + 30 Bonus"],tag:"Hemat 40%"}];function P({isOpen:e,onClose:a}){let{addCredits:s,user:n,userEmail:l}=(0,m.U)(),{toast:o}=(0,C.dj)(),[i,d]=(0,r.useState)(null),f=async e=>{if(!n)return void o({title:"Anda Belum Login",description:"Silakan login terlebih dahulu untuk melakukan top up.",variant:"destructive"});d(e.name);try{let t={firstName:n?.displayName?.split(" ")[0]||"Pengguna",lastName:n?.displayName?.split(" ").slice(1).join(" ")||"TokoBoost",email:l||"email@tidakada.com",phone:n?.phoneNumber||"08123456789"},r=await fetch("/api/create-transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e,user:t})}),c=await r.json();if(200!==r.status)throw Error(c.error||"Gagal membuat transaksi.");let{token:m}=c;a(),setTimeout(()=>{window.snap.pay(m,{onSuccess:a=>{console.log("Payment Success:",a),s(e.credits),o({title:"Top Up Berhasil!",description:`Anda telah berhasil menambahkan ${e.credits} kredit.`}),d(null)},onPending:e=>{console.log("Payment Pending:",e),o({title:"Menunggu Pembayaran",description:"Selesaikan pembayaran Anda."}),d(null)},onError:e=>{console.error("Payment Error:",e),o({title:"Pembayaran Gagal",description:"Terjadi kesalahan saat memproses pembayaran. Silakan coba lagi.",variant:"destructive"}),d(null)},onClose:()=>{console.log("Payment popup closed"),i&&d(null)}})},300)}catch(e){console.error("Handle Top Up Error:",e),o({title:"Error",description:e.message||"Terjadi kesalahan.",variant:"destructive"}),d(null)}};return(0,t.jsx)(u,{open:e,onOpenChange:a,children:(0,t.jsxs)(N,{className:"max-w-4xl h-[90vh] flex flex-col",children:[(0,t.jsxs)(y,{children:[(0,t.jsx)(b,{className:"text-center font-headline text-3xl",children:"Pilih Paket Kredit Anda"}),(0,t.jsx)(v,{className:"text-center",children:"Pilih paket yang paling sesuai dengan kebutuhan bisnis Anda."})]}),(0,t.jsx)("div",{className:"grid flex-1 grid-cols-1 gap-6 overflow-y-auto p-8 md:grid-cols-3",children:z.map(e=>(0,t.jsxs)(w.Zp,{className:`flex flex-col ${e.popular?"border-primary ring-2 ring-primary":""}`,children:[e.tag&&(0,t.jsx)("div",{className:`px-3 py-1 text-center text-sm font-semibold ${e.popular?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:e.tag}),(0,t.jsxs)(w.aR,{className:"items-center text-center",children:[(0,t.jsx)(w.ZB,{className:"font-headline text-2xl",children:e.name}),(0,t.jsxs)(w.BT,{className:"text-4xl font-bold",children:["Rp ",e.price.toLocaleString("id-ID")]})]}),(0,t.jsx)(w.Wu,{className:"flex-grow space-y-4",children:(0,t.jsx)("ul",{className:"space-y-2",children:e.features.map(e=>(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)(k.A,{className:"mr-2 mt-1 h-4 w-4 flex-shrink-0 text-green-500"}),(0,t.jsx)("span",{children:e})]},e))})}),(0,t.jsx)(j,{className:"p-6 pt-0",children:(0,t.jsxs)(c.$,{onClick:()=>f(e),disabled:null!==i,className:"w-full",children:[i===e.name?(0,t.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,i===e.name?"Memproses...":"Pilih Paket"]})})]},e.name))})]})})}var A=s(29438),T=s(74158),U=s(73256);let _=A.bL,B=A.l9;A.YJ,A.ZL,A.Pb,A.z6,r.forwardRef(({className:e,inset:a,children:s,...r},n)=>(0,t.jsxs)(A.ZP,{ref:n,className:(0,x.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",e),...r,children:[s,(0,t.jsx)(T.A,{className:"ml-auto"})]})).displayName=A.ZP.displayName,r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(A.G5,{ref:s,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})).displayName=A.G5.displayName;let L=r.forwardRef(({className:e,sideOffset:a=4,...s},r)=>(0,t.jsx)(A.ZL,{children:(0,t.jsx)(A.UC,{ref:r,sideOffset:a,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));L.displayName=A.UC.displayName;let S=r.forwardRef(({className:e,inset:a,...s},r)=>(0,t.jsx)(A.q7,{ref:r,className:(0,x.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",e),...s}));S.displayName=A.q7.displayName,r.forwardRef(({className:e,children:a,checked:s,...r},n)=>(0,t.jsxs)(A.H_,{ref:n,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(A.VF,{children:(0,t.jsx)(k.A,{className:"h-4 w-4"})})}),a]})).displayName=A.H_.displayName,r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(A.hN,{ref:r,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(A.VF,{children:(0,t.jsx)(U.A,{className:"h-2 w-2 fill-current"})})}),a]})).displayName=A.hN.displayName;let Z=r.forwardRef(({className:e,inset:a,...s},r)=>(0,t.jsx)(A.JU,{ref:r,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",e),...s}));Z.displayName=A.JU.displayName;let H=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(A.wv,{ref:s,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",e),...a}));H.displayName=A.wv.displayName;var V=s(92951);let E=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(V.bL,{ref:s,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...a}));E.displayName=V.bL.displayName;let M=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(V._V,{ref:s,className:(0,x.cn)("aspect-square h-full w-full",e),...a}));M.displayName=V._V.displayName;let $=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)(V.H4,{ref:s,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...a}));function F(){let{logout:e,user:a,userEmail:s,credits:n}=(0,m.U)(),[f,p]=(0,r.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("header",{className:"sticky top-0 z-40 w-full border-b bg-background/80 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 md:px-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)(l(),{href:"/",className:"flex items-center gap-3",children:[(0,t.jsx)(o.A,{className:"h-7 w-7 text-primary"}),(0,t.jsx)("span",{className:"font-headline text-xl font-bold md:text-2xl",children:"TokoBoost"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,t.jsxs)("div",{className:"flex h-9 min-w-[5rem] items-center justify-center gap-2 rounded-full bg-secondary px-3 text-sm font-medium",children:[(0,t.jsx)(i.A,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsx)("span",{children:n})]}),(0,t.jsx)(c.$,{onClick:()=>p(!0),size:"sm",children:"Top Up"}),(0,t.jsxs)(_,{children:[(0,t.jsx)(B,{asChild:!0,children:(0,t.jsx)(c.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,t.jsxs)(E,{className:"h-9 w-9",children:[(0,t.jsx)(M,{src:a?.photoURL||"",alt:"User avatar"}),(0,t.jsx)($,{children:s?s.charAt(0).toUpperCase():"?"})]})})}),(0,t.jsxs)(L,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(Z,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:"Profil"}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:s||"Tidak ada email"})]})}),(0,t.jsx)(H,{}),(0,t.jsxs)(S,{onClick:e,children:[(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Keluar"})]})]})]})]})]})}),(0,t.jsx)(P,{isOpen:f,onClose:()=>p(!1)})]})}$.displayName=V.H4.displayName},29523:(e,a,s)=>{s.d(a,{$:()=>d});var t=s(60687),r=s(43210),n=s(11329),l=s(24224),o=s(4780);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:a,size:s,asChild:r=!1,...l},d)=>{let c=r?n.DX:"button";return(0,t.jsx)(c,{className:(0,o.cn)(i({variant:a,size:s,className:e})),ref:d,...l})});d.displayName="Button"},44493:(e,a,s)=>{s.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>o,wL:()=>m});var t=s(60687),r=s(43210),n=s(4780);let l=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));l.displayName="Card";let o=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...a}));o.displayName="CardHeader";let i=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle";let d=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent";let m=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...a}));m.displayName="CardFooter"},70440:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var t=s(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};